import { useContext, useEffect, useRef, useState } from "react";
import back from "../../../assets/imgs/back.png";
import sui from "../../../assets/imgs/sui.png";
import view from "../../../assets/imgs/view.png";
import edit from "../../../assets/imgs/edit.png";
import del from "../../../assets/imgs/delete.png";
import user from "../../../assets/imgs/user.png";
import print from "../../../assets/imgs/print.png";
import { apiPrescription } from "../../../services/api";
import requestDoctor from "../../../services/requestDoctor";
import { AppContext } from "../../../services/context";
import { Link, useNavigate } from "react-router-dom";
import DeleteModal from "../../../components/DeleteModal";
import Loading from "../../../components/Loading";
import { matrice, onSearch } from "../../../services/service";

const Ordonnance = () => {
  return (
    <>
      <svg
        width="31"
        height="30"
        viewBox="0 0 31 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M21.6183 0.0813313C20.3759 0.309898 19.1744 0.831497 18.225 1.55236C17.8147 1.85711 15.5701 4.07244 10.0963 9.55802C1.94408 17.7278 2.23126 17.4172 1.62761 18.6596C1.11187 19.7263 0.871582 20.8163 0.871582 22.0881C0.871582 23.4009 1.11773 24.4675 1.67449 25.5986C2.8056 27.8902 4.93302 29.4667 7.48827 29.9121C8.12122 30.0234 9.44573 30.0234 10.0787 29.9121C11.2332 29.7128 12.3057 29.285 13.2669 28.6462C13.5658 28.4469 14.1577 27.9136 14.8961 27.1927C15.5408 26.5539 16.0741 26.0734 16.0976 26.1085C16.121 26.1378 16.2734 26.3605 16.4316 26.6008C16.8302 27.1927 17.8968 28.2535 18.5122 28.6579C19.9187 29.5839 21.2901 30 22.9604 30C24.8182 30 26.4241 29.4491 27.8599 28.3297C29.7998 26.8118 30.8782 24.5848 30.8782 22.0881C30.8782 20.4061 30.4679 19.0464 29.5361 17.634C29.1317 17.0186 28.0709 15.952 27.479 15.5535C27.2387 15.3952 27.016 15.2429 26.9867 15.2194C26.9515 15.196 27.4321 14.6627 28.0709 14.018C29.2958 12.7697 29.6416 12.3184 30.1221 11.3338C30.6379 10.2672 30.8782 9.17708 30.8782 7.90531C30.8782 6.59253 30.632 5.52588 30.0752 4.39478C28.9441 2.10326 26.8167 0.526743 24.2615 0.0813313C23.652 -0.0300198 22.2161 -0.0241604 21.6183 0.0813313ZM24.578 2.00949C26.6819 2.62486 28.2174 4.15449 28.868 6.29363C29.0145 6.78593 29.0262 6.89142 29.0262 7.90531C29.0262 8.91335 29.0145 9.0247 28.868 9.51699C28.6511 10.2261 28.2526 11.029 27.8306 11.5799C27.6431 11.832 26.9515 12.5704 26.2893 13.2268L25.0937 14.4224L24.66 14.3227C23.9743 14.1704 22.4095 14.1411 21.6652 14.2641C20.3817 14.4751 19.2506 14.9615 18.1722 15.7586L17.9788 15.8993L15.0661 12.9865L12.1534 10.0738L15.4939 6.72732C17.3342 4.88707 19.0338 3.23437 19.2741 3.05269C19.825 2.63072 20.5048 2.27908 21.1436 2.07982C21.882 1.84539 22.1458 1.81609 23.1421 1.83367C23.9098 1.85125 24.1325 1.88055 24.578 2.00949ZM16.6485 17.2472C16.6309 17.2824 16.4961 17.4816 16.3554 17.6868C15.7694 18.5483 15.3181 19.7028 15.1364 20.787C15.0192 21.5372 15.0485 23.102 15.2009 23.7818L15.3005 24.2155L14.105 25.4111C13.4486 26.0734 12.7101 26.7649 12.4581 26.9525C11.9072 27.3744 11.1043 27.7729 10.3952 27.9898C9.90286 28.1363 9.79151 28.148 8.78347 28.148C7.76958 28.148 7.66409 28.1363 7.17179 27.9898C5.03851 27.3393 3.5206 25.8272 2.88179 23.6998C2.73527 23.2075 2.72355 23.0961 2.72355 22.0881C2.72355 21.0742 2.73527 20.9687 2.88179 20.4764C3.08105 19.8259 3.36822 19.2164 3.72572 18.6655C3.92499 18.3607 4.91544 17.3293 7.42966 14.8033L10.864 11.3631L13.7768 14.2759C15.3767 15.8758 16.6719 17.2179 16.6485 17.2472ZM22.0872 22.094V28.1363L21.841 28.0953C21.3956 28.0191 20.663 27.7671 20.1825 27.5209C18.6587 26.7298 17.592 25.4228 17.0646 23.6998C16.9181 23.2075 16.9063 23.102 16.9063 22.0881C16.9063 21.0742 16.9181 20.9687 17.0646 20.4764C17.592 18.7534 18.6645 17.4406 20.1825 16.6611C20.7451 16.3681 21.6125 16.0751 21.9582 16.0575L22.0872 16.0516V22.094ZM24.5838 16.1981C26.6643 16.7901 28.2174 18.3431 28.868 20.4764C29.0145 20.9687 29.0262 21.0742 29.0262 22.0881C29.0262 23.102 29.0145 23.2075 28.868 23.6998C28.3464 25.4111 27.268 26.7298 25.7442 27.5209C25.2695 27.7671 24.5369 28.0191 24.0974 28.0953L23.8454 28.1363V22.094C23.8454 16.2099 23.8454 16.0516 23.9567 16.0516C24.0153 16.0516 24.3025 16.1161 24.5838 16.1981Z"
          fill="black"
        />
      </svg>
    </>
  );
};

const AnaBiolo = () => {
  return (
    <>
      <svg
        width="31"
        height="30"
        viewBox="0 0 31 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M21.6734 0.134766C21.5445 0.269531 21.5445 0.28125 21.5445 2.78906C21.5445 5.48438 21.5679 5.72461 21.855 6.44531C22.3941 7.77539 23.5659 8.8125 24.9253 9.16406C25.1187 9.2168 25.353 9.25781 25.4351 9.25781H25.5874V10.3242C25.5874 12.5859 25.2241 14.2559 24.357 15.9727C22.9976 18.668 20.7359 20.4902 18.023 21.0703C17.689 21.1406 17.273 21.1758 16.7105 21.1758C15.9605 21.1758 15.8491 21.1641 15.4214 21.0117C14.232 20.6016 13.3765 19.7461 13.0132 18.6094C12.814 17.9883 12.7671 17.1445 12.896 16.5234C13.3999 14.1211 16.0191 12.8906 18.5855 13.8574C19.6753 14.2676 20.9878 15.2168 22.3062 16.5469C22.7691 17.0215 22.8159 17.0508 23.0503 17.0508C23.2437 17.0508 23.3198 17.0215 23.4136 16.8984C23.6128 16.6465 23.5718 16.459 23.2437 16.0723C22.6929 15.4219 21.3863 14.2969 20.5073 13.7285C19.8804 13.3184 18.9429 12.873 18.3511 12.7031C17.9351 12.5859 17.7593 12.5684 16.7984 12.5684C15.773 12.5742 15.6909 12.5801 15.2163 12.7383C13.0484 13.4531 11.812 15.1465 11.8179 17.3848C11.8296 19.6113 13.2066 21.4219 15.3628 22.043C15.7613 22.1543 15.9663 22.1777 16.7398 22.1777C19.0777 22.1719 21.1167 21.3398 22.8804 19.6641C23.8648 18.7207 24.5562 17.7539 25.2359 16.377C26.1675 14.4902 26.5835 12.6387 26.5835 10.3945C26.5835 9.58008 26.6011 9.31055 26.6597 9.29297C26.6948 9.28125 26.9351 9.22852 27.1812 9.16992C28.312 8.92383 29.3902 8.12695 30.0347 7.06641C30.1402 6.88477 30.3101 6.50977 30.4155 6.22852L30.5972 5.71289L30.6148 2.97656C30.6323 0.287109 30.6323 0.240234 30.5093 0.117188C30.4038 0.0117188 30.3218 0 29.6538 0C29.2495 0 28.8745 0.0234375 28.8159 0.0585938C28.6343 0.152344 28.5464 0.439453 28.6343 0.644531C28.7339 0.884766 28.8511 0.9375 29.3081 0.9375H29.7007L29.6714 3.11719C29.6421 5.53125 29.6362 5.58984 29.2437 6.38672C28.9448 6.99023 28.3003 7.62891 27.6909 7.92773C25.605 8.95312 23.1616 7.79883 22.6284 5.53711C22.564 5.26758 22.5405 4.69336 22.5405 3.05859V0.9375H23.0562C23.5249 0.9375 23.5894 0.925781 23.7007 0.802734C23.8765 0.615234 23.8706 0.292969 23.6948 0.128906C23.5659 0.00585938 23.5015 0 22.6812 0C21.8374 0 21.7964 0.00585938 21.6734 0.134766Z"
          fill="black"
        />
        <path
          d="M7.23584 4.01384C7.15381 4.06071 7.0542 4.18376 7.01904 4.28923C6.8667 4.7697 6.60303 5.92985 6.60303 6.11735C6.60303 6.37517 6.75537 6.54509 7.0249 6.59196C7.13037 6.60954 8.61279 6.62126 10.312 6.60954L13.4116 6.59196L13.5522 6.4279C13.6284 6.34001 13.6929 6.20524 13.6929 6.13493C13.6929 6.06462 13.5874 5.60173 13.4644 5.10954C13.3062 4.47673 13.2007 4.17204 13.1128 4.08415C12.9897 3.95524 12.9722 3.95524 10.189 3.94353C7.82764 3.93181 7.37061 3.94353 7.23584 4.01384ZM12.48 5.2736L12.5679 5.62517H10.1362C7.85107 5.62517 7.71045 5.61931 7.73975 5.5197C7.75146 5.46696 7.78662 5.32634 7.8042 5.21501C7.82764 5.10368 7.85693 4.99235 7.87451 4.96306C7.88623 4.93962 8.91162 4.92204 10.1421 4.92204H12.3921L12.48 5.2736Z"
          fill="black"
        />
        <path
          d="M0.743652 5.74219C0.626465 5.85938 0.626465 5.93555 0.626465 17.8125C0.626465 29.6895 0.626465 29.7656 0.743652 29.8828C0.86084 30 0.937012 30 10.1421 30H19.4292L19.5464 29.8477C19.6694 29.6953 19.6694 29.6426 19.6694 26.2266C19.6694 22.8223 19.6694 22.752 19.5522 22.6289C19.312 22.3711 18.8726 22.418 18.7378 22.7109C18.6909 22.8164 18.6733 23.7773 18.6733 25.957V29.0625H10.1187H1.56396V17.8418V6.62109H3.55029C5.58936 6.62109 5.84717 6.59766 5.9585 6.38672C6.06396 6.1875 6.02881 5.88867 5.88232 5.75391C5.74756 5.625 5.72998 5.625 3.3042 5.625C0.937012 5.625 0.85498 5.63086 0.743652 5.74219Z"
          fill="black"
        />
        <path
          d="M14.4019 5.77734C14.2378 5.98242 14.2495 6.22852 14.4194 6.42773L14.5601 6.5918L16.6167 6.60938L18.6733 6.62695V9.13477C18.6733 11.584 18.6733 11.6484 18.7964 11.8008C18.8901 11.9238 18.9663 11.9531 19.1714 11.9531C19.3765 11.9531 19.4526 11.9238 19.5464 11.8008C19.6694 11.6484 19.6694 11.5898 19.6694 8.78906C19.6694 5.98828 19.6694 5.92969 19.5464 5.77734L19.4292 5.625H16.9741H14.519L14.4019 5.77734Z"
          fill="black"
        />
        <path
          d="M2.52485 7.28899C2.40766 7.34172 2.31977 7.43547 2.2729 7.55852C2.22602 7.69914 2.20844 10.4648 2.20844 17.8241C2.20844 29.0155 2.17915 28.2363 2.60102 28.3593C2.75922 28.4062 4.94477 28.4179 10.2768 28.4062L17.7241 28.3886L17.8764 28.248L18.0288 28.1073V25.6054C18.0288 22.8632 18.0346 22.8984 17.6713 22.8222C17.4428 22.7695 17.185 22.8808 17.0971 23.0624C17.0561 23.162 17.0327 23.8769 17.0327 25.3124V27.4218H10.1186H3.20454V17.8124V8.20305H10.1186H17.0327V9.92571C17.0327 11.578 17.0385 11.6484 17.1557 11.8007C17.2495 11.9238 17.3256 11.953 17.5307 11.953C17.7358 11.953 17.812 11.9238 17.9057 11.8007C18.0229 11.6484 18.0288 11.578 18.0288 9.60344V7.56438L17.8881 7.40032L17.7475 7.23625L10.2241 7.22453C3.98383 7.21282 2.67719 7.22453 2.52485 7.28899Z"
          fill="black"
        />
        <path
          d="M4.99756 10.9629C4.87451 11.0566 4.84521 11.1328 4.84521 11.3379C4.84521 11.543 4.87451 11.6191 4.99756 11.7129C5.1499 11.8359 5.19678 11.8359 9.13428 11.8359H13.1128L13.2534 11.6895C13.4526 11.4961 13.4526 11.1797 13.2534 10.9863L13.1128 10.8398H9.13428C5.19678 10.8398 5.1499 10.8398 4.99756 10.9629Z"
          fill="black"
        />
        <path
          d="M5.0968 14.1797C4.82141 14.291 4.7511 14.7715 4.97961 14.9883C5.11438 15.1172 5.12024 15.1172 7.97375 15.1172H10.8273L10.9679 14.9707C11.1554 14.7891 11.1554 14.5313 10.9738 14.3145L10.8331 14.1504L8.02649 14.1387C6.48547 14.1328 5.16711 14.1504 5.0968 14.1797Z"
          fill="black"
        />
        <path
          d="M17.3491 14.1797C17.0269 14.3086 17.0327 14.2618 17.0327 17.4141C17.0327 19.4532 17.0503 20.3672 17.0972 20.4727C17.1851 20.6543 17.4429 20.7657 17.6714 20.7129C18.0405 20.6309 18.0288 20.7188 18.0288 17.4317C18.023 14.2793 18.0288 14.3379 17.7534 14.1915C17.6069 14.1094 17.5191 14.1094 17.3491 14.1797Z"
          fill="black"
        />
        <path
          d="M18.8198 14.912L18.6733 15.0526V17.4257C18.6733 19.0663 18.6909 19.8456 18.7378 19.9452C18.8726 20.2382 19.312 20.285 19.5522 20.0272C19.6636 19.9042 19.6694 19.828 19.6694 17.4784V15.0526L19.5229 14.912C19.4292 14.8124 19.3179 14.7655 19.1714 14.7655C19.0249 14.7655 18.9136 14.8124 18.8198 14.912Z"
          fill="black"
        />
        <path
          d="M4.97428 17.5957C4.81022 17.7656 4.80436 18.0996 4.95671 18.2871L5.06803 18.4277H7.95085H10.8337L10.9743 18.2637C11.1559 18.0469 11.1559 17.7891 10.9684 17.6074L10.8278 17.4609H7.96256H5.09733L4.97428 17.5957Z"
          fill="black"
        />
        <path
          d="M24.5563 18.4217C24.275 18.6619 24.3219 18.8729 24.8375 19.576C25.2887 20.1971 26.1852 21.533 26.5016 22.0545L26.6715 22.3416L26.4782 22.5526C25.4879 23.6307 25.8571 25.453 27.193 26.0799C28.3414 26.619 29.6657 26.1326 30.2047 24.9725C30.3453 24.6795 30.3629 24.5682 30.3629 24.0526C30.3629 23.5369 30.3453 23.4256 30.2047 23.1326C29.7887 22.2479 28.8805 21.7323 27.902 21.826L27.5504 21.8612L27.4098 21.6092C26.941 20.7537 25.2711 18.3866 25.0895 18.3221C24.902 18.2459 24.7145 18.2811 24.5563 18.4217ZM28.4938 22.8807C29.402 23.1561 29.695 24.328 29.0094 24.9725C28.3414 25.5994 27.2047 25.3065 26.941 24.4393C26.8004 23.953 26.9059 23.5662 27.2868 23.1971C27.6735 22.8221 28.0016 22.7342 28.4938 22.8807Z"
          fill="black"
        />
        <path
          d="M4.99756 20.8652C4.87451 20.959 4.84521 21.0352 4.84521 21.2402C4.84521 21.4453 4.87451 21.5215 4.99756 21.6152C5.1499 21.7383 5.2085 21.7383 7.98584 21.7383C10.7339 21.7383 10.8276 21.7324 10.939 21.6211C11.1851 21.375 11.1323 20.9414 10.8452 20.8066C10.7456 20.7598 9.86084 20.7422 7.92725 20.7422C5.2085 20.7422 5.1499 20.7422 4.99756 20.8652Z"
          fill="black"
        />
        <path
          d="M5.10313 24.1055C5.00352 24.1523 4.90391 24.2285 4.88047 24.2871C4.8043 24.4863 4.84532 24.7852 4.96251 24.9023C5.07969 25.0195 5.15587 25.0195 10.1363 25.0195H15.1988L15.3219 24.8848C15.4566 24.7383 15.4918 24.4453 15.3922 24.2578C15.3629 24.1992 15.2516 24.123 15.152 24.0879C14.8531 23.9824 5.34337 24 5.10313 24.1055Z"
          fill="black"
        />
      </svg>
    </>
  );
};

const Imagery = () => {
  return (
    <>
      <svg
        width="41"
        height="40"
        viewBox="0 0 41 40"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M1.22106 0.0263863C1.13506 0.0498428 0.986522 0.135841 0.892705 0.229656L0.712891 0.386017V20.0249V39.6638L0.892705 39.828L1.07252 40H20.3831H39.7014L39.8656 39.8202L40.0376 39.6404V20.0171V0.386017L39.8343 0.198383L39.6311 0.0107536L20.5082 0.0029335C9.98508 -0.00488281 1.30706 0.0029335 1.22106 0.0263863ZM18.1784 1.70726C18.1549 1.8949 18.0611 2.74706 17.9673 3.60705L17.7953 5.17065L13.2608 5.20974C8.6951 5.25665 8.55438 5.26447 7.99148 5.55374C7.36604 5.8821 6.6546 6.84372 6.6546 7.37534C6.6546 7.48479 6.56078 7.60206 6.38097 7.71152C6.04479 7.9226 5.68516 8.36823 5.46626 8.86077C5.34117 9.1344 5.29426 9.40021 5.29426 9.86147C5.28644 10.4166 5.31771 10.5495 5.54444 11.0107C5.68516 11.2922 5.93534 11.6518 6.10733 11.8082L6.42787 12.0896L5.87279 17.9766L5.32553 23.8558L4.77827 25.5523C4.19192 27.3661 4.13719 27.7413 4.37955 28.1948L4.52809 28.4762L3.33193 33.5345C2.67522 36.3177 2.12014 38.6162 2.08886 38.6475C2.06541 38.6709 2.04196 30.2978 2.04196 20.0406V1.37891H10.1336H18.2253L18.1784 1.70726ZM21.1258 1.39454C21.1258 1.41018 21.2196 2.27016 21.3447 3.30996L21.5558 5.20974H20.3596H19.1635L19.1947 5.02993C19.2182 4.93612 19.312 4.15431 19.398 3.29433C19.484 2.43434 19.5778 1.65254 19.6013 1.5509C19.6325 1.38673 19.6716 1.37891 20.3752 1.37891C20.7818 1.37891 21.118 1.38673 21.1258 1.39454ZM38.7007 18.7506C38.6929 28.312 38.6773 36.0753 38.6538 36.0128C38.6382 35.9503 38.2316 34.2225 37.7469 32.1741L36.8713 28.4606L37.012 28.2104C37.2622 27.7882 37.1997 27.3739 36.6368 25.7008L36.1208 24.1528L35.5501 18.1408L34.9793 12.1287L35.3624 11.7222C35.9331 11.1045 36.0895 10.7136 36.0895 9.86147C36.0895 8.97804 35.9097 8.57932 35.2139 7.88351C34.9402 7.6177 34.7213 7.33625 34.7213 7.25807C34.7213 6.99226 34.3383 6.33554 34.0099 6.015C33.8223 5.83519 33.4548 5.58501 33.1968 5.46774L32.7277 5.24884L27.8415 5.20974L22.9552 5.17065L22.7832 3.60705C22.6894 2.74706 22.5956 1.8949 22.5721 1.70726L22.5252 1.37891H30.6169H38.7085L38.7007 18.7506ZM13.769 7.07044V7.51606L13.0497 7.7037C11.791 8.02424 11.8145 7.99297 11.8145 9.50185V10.5729L11.2516 10.9638C10.9389 11.1749 10.6418 11.4329 10.5871 11.5424C10.5167 11.6753 10.4854 12.1756 10.4854 13.1607V14.5836L10.1727 15.0683L9.85999 15.553V17.1088C9.85999 18.6568 9.85999 18.6646 10.0554 18.8522C10.1571 18.9617 10.2822 19.0477 10.3291 19.0477C10.3682 19.0477 10.2822 19.29 10.1336 19.5949L9.85999 20.1422V21.3462C9.85999 22.5111 9.86781 22.5658 10.0476 22.7769C10.2118 22.9645 10.29 22.9958 10.634 22.9801C10.8529 22.9801 11.0327 22.9801 11.0327 22.9958C11.0327 23.0114 10.9076 23.2772 10.7591 23.5899C10.6105 23.9105 10.4854 24.2232 10.4854 24.2936C10.4854 24.4812 11.8536 27.2175 12.049 27.413C12.1507 27.5146 12.307 27.5693 12.5025 27.5693C12.7683 27.5693 12.9716 27.4442 14.1521 26.553C15.4499 25.5835 15.5359 25.5366 16.3802 25.2552C16.8571 25.0988 17.2715 24.9581 17.3028 24.9425C17.3731 24.8956 16.9588 23.6603 16.8728 23.6603C16.8259 23.6603 16.349 23.801 15.8017 23.973C14.8479 24.2701 14.7775 24.3092 13.8237 25.0285C13.2765 25.435 12.8152 25.7712 12.7918 25.7712C12.7761 25.7712 12.5807 25.4272 12.3696 25.005L11.9865 24.2467L12.3383 23.543C12.5338 23.1521 12.6979 22.8316 12.7136 22.816C12.7448 22.7769 17.4044 22.3234 17.5451 22.3469C17.6546 22.3625 17.7562 22.5814 17.9829 23.2694L18.2722 24.1685L17.6624 25.091C17.3262 25.5992 17.0526 26.0995 17.0526 26.1934C17.0526 26.2872 17.1933 26.7719 17.3575 27.2801L17.6624 28.1869L17.4591 28.8124L17.2559 29.43L16.8806 29.2424C16.2942 28.9453 15.5437 28.7968 14.8635 28.8515C13.1279 28.9766 11.791 30.0711 11.3063 31.752C11.1031 32.4321 11.1734 33.6127 11.4549 34.3007C11.7285 34.973 12.2758 35.6454 12.8778 36.0441L13.3468 36.3646L13.4876 37.381C13.5579 37.936 13.6439 38.4598 13.6596 38.5302C13.6986 38.6631 13.4876 38.6709 9.93817 38.6709C6.38878 38.6709 6.1777 38.6631 6.21679 38.5302C6.24024 38.4598 6.76405 36.2239 7.38949 33.5658C8.44493 29.086 8.54656 28.7108 8.75765 28.4606C9.18764 27.9759 9.19546 27.7335 8.89837 26.2168L8.62474 24.8721L9.22673 18.3284C9.77399 12.3085 9.83654 11.7691 9.98508 11.5658C10.3682 11.0498 10.5089 10.6511 10.548 10.0178C10.5714 9.50185 10.548 9.30639 10.4073 8.93113C10.1024 8.12587 9.28928 7.43007 8.4762 7.2737C8.33547 7.25025 8.2182 7.19553 8.2182 7.16425C8.2182 7.07825 8.60911 6.79681 8.85147 6.70299C8.9531 6.6639 10.1024 6.62481 11.408 6.62481L13.769 6.61699V7.07044ZM18.0846 7.51606C18.2018 7.98515 18.3035 8.44641 18.3035 8.53241C18.3035 8.91549 18.2409 8.91549 16.693 8.46987L15.2153 8.04769L15.1919 7.32843L15.1684 6.61699L16.521 6.63263L17.8657 6.65608L18.0846 7.51606ZM21.4307 6.6639C21.4307 6.68736 21.3212 7.12516 21.1961 7.64897L20.9538 8.58714L21.2743 9.55657L21.6027 10.526L21.2743 11.5033L20.946 12.4805L21.2743 13.4578L21.6027 14.435L21.2743 15.4201L20.946 16.4052L21.2587 17.3981L21.5792 18.3831L21.2665 19.3604L20.946 20.3376L21.2743 21.3384L21.6027 22.3312L21.2743 23.3163C20.8912 24.4656 20.86 24.3092 21.673 25.5366L22.2125 26.3653L22.0327 26.9048L21.845 27.4521H20.3752H18.9055L18.7178 26.8892L18.5302 26.3263L19.1165 25.4428C19.8202 24.3952 19.828 24.3561 19.4293 23.1756L19.1556 22.3391L19.4762 21.3462L19.7967 20.3611L19.4684 19.376L19.14 18.391L19.4684 17.3981L19.7967 16.4052L19.4762 15.4201L19.1556 14.435L19.4762 13.4578L19.7889 12.4805L19.4762 11.5033L19.1556 10.526L19.4762 9.54875L19.7889 8.5715L19.5544 7.64116C19.4293 7.12516 19.3198 6.68736 19.3198 6.6639C19.3198 6.64045 19.7967 6.61699 20.3752 6.61699C20.9538 6.61699 21.4307 6.64045 21.4307 6.6639ZM26.184 7.32843L26.1606 8.04769L24.4406 8.54023C23.4946 8.81386 22.6816 9.02495 22.6268 9.00149C22.4314 8.93113 22.4314 8.45423 22.6425 7.63334C22.7519 7.17989 22.8614 6.76553 22.877 6.71081C22.9005 6.64045 23.307 6.61699 24.5579 6.61699H26.2075L26.184 7.32843ZM32.6496 6.76553C32.8216 6.84372 33.0326 6.98444 33.1108 7.07825C33.2594 7.24244 33.2594 7.24244 33.0952 7.24244C32.759 7.24244 32.0554 7.57079 31.6801 7.91478C30.7029 8.79822 30.5309 10.3853 31.3127 11.4094L31.5707 11.7534L32.1727 18.3128L32.7668 24.8799L32.5323 26.0448C32.2039 27.6866 32.2196 28.0462 32.6808 28.5466C32.8997 28.7889 32.9545 29.0078 35.167 38.4911L35.2061 38.6709H31.4847C27.8337 38.6709 27.7633 38.6709 27.7633 38.5146C27.7633 38.3504 27.9744 36.7946 28.0369 36.5132C28.0604 36.4193 28.248 36.2317 28.4669 36.091C29.0142 35.7392 29.538 35.1294 29.8429 34.4883C30.9296 32.2054 29.6474 29.516 27.2004 28.9375C26.0433 28.6638 24.6908 28.9531 23.8699 29.6411C23.737 29.7506 23.6197 29.8131 23.5963 29.7818C23.5806 29.7427 23.4556 29.3831 23.3226 28.9688L23.0725 28.2182L23.3852 27.2957C23.5572 26.7797 23.6979 26.295 23.6979 26.209C23.6979 26.123 23.4165 25.6305 23.0725 25.1066L22.4548 24.1685L22.7441 23.2538L23.0334 22.3312H23.5572C24.0263 22.3312 28.6233 22.7691 28.6624 22.816C28.678 22.8316 28.8422 23.1678 29.0454 23.5587L29.4051 24.2858L29.0376 25.0285C28.8187 25.4585 28.6233 25.7555 28.5764 25.7399C28.5216 25.7165 28.0604 25.3881 27.5444 25.005C26.6688 24.3483 26.5359 24.2779 25.6211 23.973C25.0739 23.7932 24.5892 23.6603 24.5344 23.6838C24.4328 23.7229 24.0341 24.8799 24.0966 24.9425C24.1123 24.9581 24.5344 25.0988 25.027 25.263C25.8948 25.5523 25.9651 25.5914 27.2629 26.5686C28.6467 27.6084 28.8578 27.7022 29.2565 27.4911C29.4363 27.3895 30.8905 24.5281 30.8905 24.2623C30.8905 24.1685 30.7654 23.8245 30.6169 23.5118L30.3432 22.941L30.6091 22.988C30.9061 23.0427 31.258 22.9332 31.4065 22.7378C31.4847 22.644 31.5081 22.2531 31.5159 21.3305C31.5159 20.0718 31.5159 20.0562 31.2814 19.5871L31.039 19.118L31.2814 18.9226L31.5159 18.7193V17.1088V15.4905L31.2032 15.0214L30.8905 14.5523V13.1294C30.8905 12.2772 30.8592 11.6284 30.8045 11.5189C30.7576 11.4173 30.4605 11.1593 30.1478 10.9482L29.5693 10.5651L29.5614 9.40803C29.5614 7.96951 29.5693 7.98515 28.4122 7.71152L27.6069 7.52388V7.07044V6.61699H29.9758C32.1023 6.61699 32.3681 6.63263 32.6496 6.76553ZM8.31984 8.68095C8.87492 8.88422 9.172 9.29076 9.172 9.86147C9.172 10.4556 8.82019 10.9013 8.21039 11.0889C7.38949 11.3313 6.52169 10.5026 6.68587 9.62693C6.77969 9.12658 7.38949 8.60277 7.90548 8.57932C7.96803 8.57932 8.15566 8.62623 8.31984 8.68095ZM34.1584 8.82168C34.9637 9.31421 34.8621 10.6042 33.9864 11.0029C33.5799 11.1827 33.361 11.1827 32.9545 11.0029C31.899 10.5182 32.0241 9.00149 33.1499 8.64186C33.4235 8.55586 33.8457 8.63404 34.1584 8.82168ZM13.9957 9.07185C14.0661 9.1344 14.8792 9.40021 15.8017 9.66603C16.7242 9.92402 17.5451 10.1586 17.6233 10.182C17.7249 10.2133 17.7562 10.2758 17.7249 10.3931C17.7015 10.4791 17.7875 10.8622 17.9126 11.2453C18.0689 11.73 18.108 11.9489 18.0455 11.9723C17.9907 11.988 17.4982 12.0896 16.9431 12.2069L15.9268 12.4023L14.7306 11.6909C14.0661 11.2922 13.4563 10.8778 13.3703 10.7527C13.2374 10.5651 13.2217 10.4322 13.2374 9.80675C13.2608 9.11094 13.2687 9.08749 13.4563 9.03276C13.7612 8.94677 13.8628 8.95458 13.9957 9.07185ZM27.9431 9.0484L28.2324 9.12658V9.79111C28.2324 10.7136 28.1698 10.7918 26.6844 11.6831L25.4726 12.4102L24.1045 12.1287C23.3539 11.9802 22.7207 11.8394 22.6972 11.8238C22.6816 11.8003 22.7363 11.5658 22.8301 11.3C22.9239 11.0264 22.9943 10.7215 22.9943 10.612C22.9943 10.4166 23.049 10.3931 25.0504 9.8302C26.1762 9.51748 27.1848 9.18913 27.2942 9.11094C27.5287 8.94677 27.56 8.93895 27.9431 9.0484ZM13.9645 12.8714C15.0668 13.536 15.5984 13.8096 15.7704 13.8096C15.9033 13.8096 16.4506 13.7236 16.9744 13.6141C17.506 13.5047 17.9517 13.4265 17.9595 13.4421C17.9751 13.4578 17.9204 13.6845 17.8344 13.9503C17.6937 14.3881 17.6937 14.4663 17.7953 14.8025C17.8578 15.0057 17.8813 15.2012 17.85 15.2246C17.8188 15.2559 17.2246 15.3654 16.521 15.4826L15.2466 15.6859L13.8472 14.9823C13.0732 14.5914 12.4399 14.2396 12.4399 14.2005C12.4399 14.1614 12.3149 14.0441 12.1663 13.9503L11.8927 13.7705V12.9887C11.8927 12.2147 11.8927 12.1991 12.1116 12.074C12.2289 11.9958 12.3383 11.9333 12.3618 11.9333C12.3852 11.9333 13.1045 12.3554 13.9645 12.8714ZM29.2878 12.0583C29.4754 12.1834 29.4833 12.2225 29.4833 12.9887V13.7939L29.2096 13.9659C29.0611 14.0598 28.9516 14.1614 28.9751 14.2005C28.9985 14.2318 28.3653 14.5836 27.5757 14.9745L26.1293 15.6937L24.6986 15.4514C22.6659 15.1152 22.8301 15.1621 22.9239 14.9354C23.0334 14.6305 23.0099 14.2708 22.8379 13.7705C22.7519 13.5203 22.6894 13.3092 22.6972 13.2936C22.7128 13.2858 23.3148 13.3952 24.0419 13.5438C24.769 13.6923 25.4804 13.8096 25.6133 13.8096C25.7931 13.8096 26.3013 13.5438 27.4193 12.8714C28.2715 12.3632 29.0064 11.9411 29.0376 11.9333C29.0689 11.9333 29.1862 11.988 29.2878 12.0583ZM8.32766 12.9027C8.3042 13.1216 8.04621 15.9283 7.74912 19.1337L7.2175 24.9659L7.47549 26.2324L7.72567 27.4911H6.68587C6.10733 27.4911 5.63825 27.4833 5.63825 27.4677C5.63825 27.4599 5.86498 26.7641 6.14642 25.9354L6.64678 24.4187L7.2175 18.4691L7.78039 12.5196L8.07748 12.5118L8.37456 12.4962L8.32766 12.9027ZM33.6503 12.9105C33.6815 13.1216 33.9317 15.7797 34.2132 18.8131L34.737 24.3248L35.2373 25.8494C35.511 26.6859 35.7377 27.3973 35.7377 27.4364C35.7377 27.4677 35.2842 27.4911 34.7213 27.4911C34.1663 27.4911 33.705 27.4599 33.705 27.4286C33.705 27.3895 33.8144 26.8344 33.9395 26.1855L34.1819 25.005L33.6268 18.9617C33.3297 15.6312 33.0796 12.8167 33.0796 12.6994C33.0796 12.5118 33.103 12.4962 33.3454 12.504C33.6034 12.5196 33.6112 12.5274 33.6503 12.9105ZM13.2843 16.2723C14.2146 16.7413 14.9964 17.0932 15.1215 17.0932C15.2466 17.0932 15.9815 16.9837 16.7555 16.8586C17.5295 16.7257 18.1862 16.6319 18.2018 16.6553C18.2253 16.6788 18.1315 17.0228 17.9986 17.4215C17.8657 17.8202 17.7484 18.2346 17.7328 18.344C17.7015 18.5395 17.678 18.5395 16.1066 18.7584L14.5117 18.9773L12.909 18.4379L11.3063 17.8984L11.2829 16.9446C11.2672 16.0846 11.2829 15.9595 11.4314 15.7172C11.5174 15.5686 11.6112 15.4514 11.6269 15.4514C11.6503 15.4514 12.393 15.8188 13.2843 16.2723ZM29.9914 15.7406C30.1712 16.0143 30.1869 16.1003 30.1869 16.9446V17.8593L28.5138 18.4222L26.8329 18.9773L25.1286 18.7349C22.9552 18.43 22.9943 18.4379 22.9943 18.2737C22.9943 18.2033 22.8692 17.7733 22.7207 17.3277C22.5721 16.8821 22.4548 16.5146 22.4705 16.5068C22.4783 16.499 23.2757 16.6241 24.2452 16.7883C25.2146 16.9524 26.1293 17.0853 26.2779 17.0853C26.4655 17.0853 27.0362 16.8352 28.1542 16.2723C29.0376 15.8266 29.7647 15.4592 29.7725 15.4592C29.7803 15.4514 29.882 15.5843 29.9914 15.7406ZM16.1613 20.1578C17.1464 20.0171 18.0142 19.9076 18.0846 19.9076C18.2644 19.9076 18.3347 20.2986 18.2175 20.6816L18.1237 21.0022H17.3966C16.9979 21.0022 15.4655 21.1273 13.9957 21.2758C12.5181 21.4243 11.2985 21.5494 11.2907 21.5494C11.2751 21.5494 11.2672 21.2993 11.2672 20.9944C11.2672 20.5253 11.3063 20.3689 11.5096 19.9858L11.752 19.5324L13.0576 19.9702L14.371 20.408L16.1613 20.1578ZM29.9132 20.064C30.1322 20.5018 30.1869 20.6973 30.1869 21.0804C30.1869 21.3384 30.1791 21.5494 30.1712 21.5494C30.1556 21.5494 28.936 21.4243 27.4506 21.2758C25.8088 21.1116 24.339 21.0022 23.6901 21.0022H22.6268L22.5252 20.6582C22.4548 20.4002 22.4548 20.2438 22.5174 20.0484L22.6034 19.7826L24.8159 20.0953L27.0206 20.408L28.3106 19.9702C29.022 19.7278 29.6083 19.5246 29.6162 19.5246C29.6318 19.5167 29.7647 19.7591 29.9132 20.064ZM7.02986 28.9922C7.00641 29.0469 6.49042 31.2516 5.87279 33.8785L4.747 38.6709H4.17628C3.80883 38.6709 3.60556 38.6397 3.60556 38.5849C3.60556 38.4989 5.63825 29.8131 5.80243 29.1877L5.88061 28.8984H6.46696C6.91259 28.8984 7.05332 28.9218 7.02986 28.9922ZM22.0561 29.5629L22.2594 30.1805L22.0249 31.1422L21.7903 32.1038H20.3674H18.9445L18.71 31.1578L18.4755 30.2118L18.6631 29.6567C18.7647 29.344 18.8664 29.0469 18.8898 28.9922C18.9133 28.914 19.2573 28.8984 20.3831 28.914L21.845 28.9375L22.0561 29.5629ZM36.5899 33.3781C37.1684 35.833 37.6844 38.0377 37.7391 38.2644L37.8329 38.6788L37.2388 38.6553L36.6446 38.6318L35.8862 35.4264C35.4719 33.6596 34.9559 31.4705 34.7448 30.5558L34.3539 28.8984H34.9481H35.5422L36.5899 33.3781ZM16.2317 30.4776C16.6695 30.7044 17.1542 31.1422 17.3184 31.4627C17.3731 31.58 17.4591 31.8458 17.5138 32.0647C17.7562 33.081 17.8344 33.2687 18.0689 33.3938C18.4051 33.5658 22.3454 33.5658 22.6816 33.3938C22.9239 33.2687 22.9787 33.1279 23.2757 31.924L23.4086 31.3923L23.5728 31.5565C23.8152 31.7754 23.8934 31.752 24.0888 31.4393C24.3468 31.0249 24.9175 30.5636 25.4101 30.376C25.7541 30.2509 25.9651 30.2196 26.403 30.2431C27.3802 30.3056 28.1229 30.806 28.5607 31.6972C28.7875 32.1507 28.8187 32.2992 28.8187 32.8074C28.8109 33.4563 28.5998 34.027 28.1776 34.5196L27.9587 34.7776L27.4506 34.6994C27.1691 34.6603 26.9268 34.6368 26.9111 34.6446C26.9033 34.6603 26.7626 35.575 26.6062 36.6695L26.317 38.6709H20.7114C15.4421 38.6709 15.1059 38.6631 15.0668 38.5302C15.0512 38.4598 14.9183 37.5686 14.7775 36.5601C14.6446 35.5515 14.5039 34.6994 14.4804 34.6681C14.457 34.6446 14.2225 34.6525 13.9723 34.6916C13.5501 34.7619 13.4954 34.7541 13.3156 34.5899C13.0107 34.3085 12.7605 33.8628 12.6354 33.3703C12.2992 32.1272 13.0732 30.7513 14.3475 30.3369C14.8557 30.1649 15.7626 30.2353 16.2317 30.4776Z"
          fill="black"
        />
      </svg>
    </>
  );
};

const Doctor = () => {
  return (
    <>
      <svg
        width="31"
        height="30"
        viewBox="0 0 31 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M13.8702 0.0877154C12.1232 0.325575 10.5482 1.11358 9.25754 2.3954C8.54721 3.1009 8.12141 3.71374 7.88158 4.37569L7.71664 4.83108L7.6973 7.45527C7.68113 9.64833 7.6932 10.1678 7.77078 10.6174C7.94568 11.631 8.36416 12.656 8.97863 13.576C9.37637 14.1715 10.3415 15.1269 10.9514 15.5287L11.4359 15.848L11.4201 16.9562L11.4043 18.0644L8.5918 18.6913C5.55963 19.3671 5.20654 19.4771 4.41939 19.991C3.61859 20.5139 2.97834 21.2095 2.52588 22.0484C2.26449 22.5331 0.125 28.8489 0.125 29.1359C0.125 29.5674 0.56498 30 1.00391 30C1.28926 30 1.63256 29.7926 1.75672 29.5451C1.81713 29.4246 2.33281 27.925 2.90264 26.2125C3.95744 23.0428 4.07844 22.7471 4.56242 22.1564C4.80494 21.8604 5.35127 21.4419 5.7793 21.2242C6.07344 21.0746 7.55738 20.6743 7.63965 20.7224C7.66379 20.7365 7.68359 21.6131 7.68359 22.6704V24.5926L7.29799 24.7825C6.26469 25.2913 5.65021 26.4755 5.81463 27.6413C5.96598 28.7147 6.80006 29.6261 7.89113 29.9103C9.43361 30.3121 11.0288 29.2175 11.262 27.5974C11.4229 26.4789 10.795 25.2773 9.80393 24.8072L9.44727 24.6381L9.44434 22.467L9.44141 20.296L10.6452 20.0298L11.849 19.7635L11.9542 19.9154C12.012 19.9989 12.5886 20.9506 13.2354 22.0303C13.8822 23.11 14.4771 24.055 14.5575 24.1302C14.8481 24.4022 15.4019 24.4022 15.6925 24.1302C15.7729 24.055 16.4073 23.0441 17.1022 21.8838C17.7972 20.7235 18.3684 19.7703 18.3714 19.7656C18.3745 19.7608 18.924 19.8783 19.5928 20.0265L20.8086 20.296V21.5055V22.715L20.5596 22.788C20.0082 22.9496 19.2248 23.4929 18.7942 24.0123C18.4585 24.4174 18.1766 25.0501 18.0784 25.6194C18.0114 26.0072 17.9949 26.5127 18.0081 27.7661C18.0245 29.3161 18.032 29.4145 18.1462 29.5674C18.4153 29.9275 18.5302 29.9693 19.3038 29.9878C19.8977 30.0019 20.0518 29.9872 20.2215 29.8999C20.9625 29.5185 20.7926 28.3931 19.9744 28.2623L19.7437 28.2254L19.7639 27.047C19.7837 25.893 19.7876 25.8611 19.9527 25.5026C20.138 25.1001 20.4737 24.7518 20.876 24.5442C21.2558 24.3483 21.9603 24.3222 22.3992 24.4878C22.86 24.6617 23.225 25.002 23.4578 25.4749L23.6504 25.866L23.6709 27.0456L23.6915 28.2251L23.46 28.2621C22.6411 28.3931 22.4707 29.5183 23.2121 29.8999C23.3818 29.9872 23.5359 30.0019 24.1297 29.9878C24.9035 29.9693 25.0186 29.9275 25.2874 29.5671C25.4034 29.4117 25.4082 29.3321 25.408 27.5783C25.4078 26.0165 25.3929 25.6973 25.3048 25.3778C24.9862 24.2221 24.069 23.2214 22.961 22.8203L22.5957 22.6881L22.5795 21.7337C22.5707 21.2087 22.5839 20.7604 22.6088 20.7373C22.6781 20.6733 24.1384 21.0552 24.4707 21.2242C24.8987 21.4419 25.4451 21.8604 25.6876 22.1564C26.1727 22.7485 26.2918 23.0405 27.3776 26.3004C27.9641 28.0613 28.4834 29.5627 28.5317 29.6371C28.645 29.8118 29.0156 30 29.2461 30C29.685 30 30.125 29.5674 30.125 29.1359C30.125 28.9206 28.0241 22.6278 27.8115 22.2061C27.1775 20.949 26.1061 19.9703 24.793 19.4489C24.6157 19.3785 23.2051 19.0382 21.6582 18.6926L18.8457 18.0644L18.8299 16.9562L18.8141 15.848L19.2986 15.5293C19.9021 15.1324 20.8651 14.1781 21.2696 13.576C21.8889 12.6541 22.3036 11.6341 22.4782 10.6032C22.5575 10.1352 22.5694 9.63087 22.5529 7.4388L22.5333 4.83108L22.3684 4.37569C22.1286 3.71374 21.7029 3.10095 20.9925 2.3954C19.1162 0.531966 16.5986 -0.283753 13.8702 0.0877154ZM16.2045 1.84286C16.9329 1.95268 17.7911 2.24357 18.3789 2.57994C19.3353 3.12709 20.2698 4.02772 20.6178 4.73749C20.772 5.05188 20.7794 5.10908 20.7985 6.11871L20.8184 7.17199L20.0863 6.45929C19.102 5.50141 19.0709 5.49367 18.0184 5.94583C17.7496 6.06128 17.2721 6.22548 16.9572 6.31062C16.4217 6.4556 16.3036 6.46556 15.125 6.46556C13.9464 6.46556 13.8283 6.4556 13.2928 6.31062C12.9779 6.22548 12.5004 6.06128 12.2316 5.94583C11.1761 5.49244 11.1379 5.50193 10.1634 6.45747L9.44141 7.16543V6.21657C9.44141 4.8728 9.57846 4.53491 10.4915 3.62818C11.9677 2.16206 14.0354 1.51593 16.2045 1.84286ZM11.9576 7.73045C12.3628 7.89026 13.304 8.1215 13.8548 8.19668C14.4438 8.27702 15.8056 8.27708 16.3952 8.19674C16.9572 8.12021 17.6435 7.95419 18.2428 7.74991L18.6947 7.59591L19.283 8.16058C19.7581 8.61667 19.9623 8.76786 20.3447 8.94642L20.8182 9.16751L20.7893 9.78282C20.6834 12.0316 19.0682 14.0821 16.8521 14.7811C14.1495 15.6335 11.2689 14.401 10.0055 11.8517C9.63424 11.1026 9.44018 10.3194 9.44299 9.58159L9.44457 9.16751L9.91244 8.94606C10.2858 8.76932 10.4955 8.61292 10.9509 8.17166C11.2647 7.86758 11.5535 7.61782 11.5926 7.61671C11.6316 7.61554 11.7959 7.66676 11.9576 7.73045ZM13.6895 16.6709C14.2774 16.8151 15.4115 16.8441 16.1504 16.7338C16.5049 16.6809 16.8542 16.6217 16.9268 16.6022L17.0586 16.5668V17.5535V18.5403L16.1064 20.1371C15.5828 21.0154 15.1411 21.7339 15.125 21.7339C15.1089 21.7339 14.6673 21.0154 14.1436 20.1371L13.1914 18.5403V17.5604C13.1914 16.8144 13.2089 16.581 13.2646 16.5826C13.305 16.5837 13.4961 16.6234 13.6895 16.6709ZM8.96861 26.3354C9.05984 26.3825 9.20287 26.5024 9.28643 26.6018C9.97894 27.4249 9.0517 28.6135 8.09697 28.1264C7.3683 27.7546 7.34779 26.7943 8.05924 26.3604C8.27867 26.2265 8.734 26.2141 8.96861 26.3354Z"
          fill="black"
        />
      </svg>
    </>
  );
};

const PrescriptionListe = () => {
  const authCtx = useContext(AppContext);
  const { user } = authCtx;
  const [datas, setDatas] = useState([]);
  const [stopLoad, setStopLoad] = useState(false);
  const [search, setSearch] = useState("");
  const [list, setList] = useState([]);
  const [modalView, setModalView] = useState("");

  const [notifyBg, setNotifyBg] = useState("");

  const [modalNotifyMsg, setModalNotifyMsg] = useState("");
  const notifyRef = useRef();
  const [refresh, setRefresh] = useState(0);
  const [deleteId, setDeleteId] = useState("");
  const [fail, setFail] = useState(false);
  const [pageNumber, setPageNumber] = useState(0);
  const [totalPage, setTotalPage] = useState(1);
  const [pagination, setPagination] = useState([]);
  const header = {
    headers: { Authorization: `${user.token}` },
  };
  const navigate = useNavigate();
  const [viewPresc, setViewPresc] = useState({
    date: "",
    author: "",
    id: "",
    type: "",
    prescriptions: [],
  });

  useEffect(() => {
    getList();
  }, [refresh]);

  const makeSearch = (e) => {
    e.preventDefault();
    onSearch(e, setList, datas, ["date", "hour", "author", "id", "type"]);
  };

  const getList = () => {
    requestDoctor
      .get(apiPrescription.getAllPrescri + "/" + user.cni, header)
      .then((res) => {
        console.log(res.data);
        const data = matrice(res.data);
        setPagination(data.list);
        if (data.list.length !== 0) {
          setDatas(data.list[0]);
          setList(data.list[0]);
          setTotalPage(data.counter);
        } else {
          setTotalPage(data.counter + 1);
        }
        setStopLoad(true);
      })
      .catch((error) => {
        console.log(error);
        setStopLoad(true);
        setFail(true);
      });
  };

  const getPrescriptionById = (id) => {
    requestDoctor
      .get(apiPrescription.getPrescriptionById + "/" + id, header)
      .then((res) => {
        console.log(res.data);
        setViewPresc(res.data);
      })
      .catch((error) => {
        console.log(error);
      });
  };

  const deletePresc = (id) => {
    requestDoctor
      .delete(apiPrescription.deletePresc + "/" + id, header)
      .then((res) => {
        setModalNotifyMsg("Suppression réussie !");
        notifyRef.current.click();
        setRefresh(refresh + 1);
      })
      .catch((error) => {
        console.log(error);
      });
  };

  const editPrescr = (data, typePresc) => {
    if (typePresc === "ORDINANCE") {
      navigate("ordonnance-medicale/" + data.id);
    }
    if (typePresc === "BIOLOGICAL_ANALYSIS") {
      navigate("form-analyse-biologique/" + data.id);
    }
    if (typePresc === "MEDICAL_IMAGERY") {
      navigate("form-imagerie/" + data.id);
    }
    if (typePresc === "CONSULTATION") {
      navigate("form-examen-specialise/" + data.id);
    }
  };

  const printPresciption = (e, id) => {
    e.preventDefault();
    requestDoctor
      .get(
        apiPrescription.pdfPescription + "/" + id + "/" + user.organisationRef
      )
      .then((res) => {
        window.open(
          "https://laafivisionmedical.com/"+res.data
        );
      })
      .catch((error) => {
        console.log(error);
      });
  };
  const makePagination = (e, page) => {
    e.preventDefault();
    if (page === "suiv" && pageNumber < Number(totalPage) - 1) {
      setPageNumber(pageNumber + 1);
      setList(pagination[pageNumber + 1]);
      setDatas(pagination[pageNumber + 1]);
    }
    if (page === "prece" && pageNumber >= 1) {
      setPageNumber(pageNumber - 1);
      setList(pagination[pageNumber - 1]);
      setDatas(pagination[pageNumber - 1]);
    }
  };
  return (
    <>
      <div className="row my-3">
        <div className="col-9">
          <div className="d-inline-block">
            <input
              type="text"
              className="form-control"
              placeholder="Rechercher..."
              value={search}
              onChange={(e) => {
                setSearch(e.target.value);
                makeSearch(e);
              }}
            />
          </div>
          <div className="btn-group">
            <div
              className="d-inline-block my-1 mx-1"
              onClick={(e) => makePagination(e, "prece")}
            >
              <img src={back} alt="" />
            </div>
            <div
              className="d-inline-block my-1 mx-1"
              onClick={(e) => makePagination(e, "suiv")}
            >
              <img src={sui} alt="" />
            </div>
          </div>
          <div className="d-inline-block my-1 mx-1 text-meduim text-bold">
            {pageNumber + 1}/{totalPage}
          </div>
        </div>
        <div className="col-3 d-flex justify-content-end align-items-center">
          <button
            className="btn btn-primary"
            data-bs-target="#prescriptionModal"
            data-bs-toggle="modal"
            onClick={(e) => {
              setModalView("");
            }}
          >
            Ajouter
          </button>
        </div>
      </div>

      <Loading data={datas} stopLoad={stopLoad} fail={fail}>
        <div className="table-responsive-lg">
          <table className="table table-striped align-middle">
            <thead>
              <tr className="align-middle">
                <th scope="col" className="border-raduis-left">
                  Prescription ID
                </th>
                <th scope="col">Type</th>
                <th scope="col">Date de délivrance</th>
                <th scope="col">Délivrée par</th>
                <th scope="col" className="text-center">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody>
              {list.map((data, idx) => {
                //data.checkValue = false
                return (
                  <tr key={idx}>
                    <td>
                      <span className="text-bold">PRESC-0218374</span>
                    </td>
                    <td>
                      <span className="text-bold">
                        {data.type === "ORDINANCE" && "Ordonnance"}
                        {data.type === "BIOLOGICAL_ANALYSIS" &&
                          "Analyses biologiques"}
                        {data.type === "MEDICAL_IMAGERY" && "Imagerie médicale"}
                        {data.type === "CONSULTATION" &&
                          "Consultation et/ou examen spécialisé"}
                      </span>
                    </td>
                    <td>
                      <span className="text-bold">{data.date}</span>
                      <br />
                      <span>
                        <span className="text-bold">Heure:</span> {data.hour}
                      </span>
                    </td>
                    <td>
                      <div className="d-inline-block me-2 align-middle">
                        <img src={user} alt="" />
                      </div>
                      <div className="d-inline-block align-middle">
                        <span className="text-bold">{data.author}</span>
                        <br />
                        <span>Psychiatre</span>
                      </div>
                    </td>
                    <td className="text-center">
                      <div className="btn-group">
                        <div className="d-inline-block mx-1">
                          <img
                            title="Voir la prescription"
                            data-bs-toggle="modal"
                            data-bs-target="#viewPrescriptionModal"
                            onClick={(e) => {
                              e.preventDefault();
                              //setDelete(["" + data.employeeReference]);
                              //viewEmploye(data);
                              getPrescriptionById(data.id);
                            }}
                            src={view}
                            alt=""
                          />
                        </div>
                        <div className="d-inline-block mx-1">
                          <img
                            title="Imprimer la prescription"
                            onClick={(e) => {
                              printPresciption(e, data.id);
                            }}
                            src={print}
                            alt=""
                          />
                        </div>
                        <div className="d-inline-block mx-1">
                          <img
                            title="Éditer la prescription"
                            onClick={(e) => {
                              e.preventDefault();
                              console.log(data);
                              editPrescr(data, data.type);
                            }}
                            src={edit}
                            alt=""
                          />
                        </div>
                        <div className="d-inline-block mx-1">
                          <img
                            title="Supprimer la prescription"
                            data-bs-toggle="modal"
                            data-bs-target="#deletePresc"
                            onClick={(e) => {
                              e.preventDefault();
                              setDeleteId(data.id);
                            }}
                            src={del}
                            alt=""
                          />
                        </div>
                      </div>
                    </td>
                  </tr>
                );
              })}
            </tbody>
          </table>
        </div>
      </Loading>

      <div className="modal fade" id="viewPrescriptionModal">
        <div className="modal-dialog modal-dialog-centered modal-lg">
          <div className="modal-content">
            <div className="modal-header1 p-4 border-0">
              <div className="d-flex">
                {viewPresc.type === "ORDINANCE" && (
                  <span className="me-auto text-meduim">
                    Ordonnance / PRESC-0218374
                  </span>
                )}
                {viewPresc.type === "BIOLOGICAL_ANALYSIS" && (
                  <span className="me-auto text-meduim">
                    Analyses biologiques / PRESC-0218374
                  </span>
                )}
                {viewPresc.type === "MEDICAL_IMAGERY" && (
                  <span className="me-auto text-meduim">
                    Imagerie médicale / PRESC-0218374
                  </span>
                )}
                {viewPresc.type === "CONSULTATION" && (
                  <span className="me-auto text-meduim">
                    Consultation et/ou examen spécialisé / PRESC-0218374
                  </span>
                )}
                <div className="btn-group me-2">
                  <div className="d-inline-block mx-1">
                    <img
                      title="Imprimer la prescription"
                      onClick={(e) => {
                        printPresciption(e, viewPresc.id);
                      }}
                      src={print}
                      alt=""
                    />
                  </div>
                  <div className="d-inline-block mx-1">
                    <img
                      title="Éditer la prescription"
                      data-bs-dismiss="modal"
                      onClick={(e) => {
                        e.preventDefault();
                        //setDelete(["" + data.employeeReference]);
                        editPrescr(viewPresc, viewPresc.type);
                      }}
                      src={edit}
                      alt=""
                    />
                  </div>
                  <div className="d-inline-block mx-1">
                    <img
                      title="Supprimer la prescription"
                      data-bs-toggle="modal"
                      data-bs-target="#deletePresc"
                      onClick={(e) => {
                        e.preventDefault();
                        setDeleteId(viewPresc.id);
                      }}
                      src={del}
                      alt=""
                    />
                  </div>
                </div>
                <button
                  type="button"
                  className="btn-close"
                  data-bs-dismiss="modal"
                ></button>
              </div>
              <div className="d-flex py-3 border-bottom">
                <div className="d-flex me-auto">
                  <img
                    className="me-2"
                    width={"42px"}
                    src={user.profile}
                    alt=""
                  />
                  <div>
                    <span className="fw-bold">{viewPresc.author}</span> <br />
                    <span>Psychiatre</span>
                  </div>
                </div>
                <div>
                  <span>Prescription réalisée</span> <br />
                  <span className="fw-bold text-meduim">{viewPresc.date}</span>
                </div>
              </div>
            </div>
            <div className="modal-body">
              {viewPresc.prescriptions.map((data, idx) => {
                return (
                  <div key={idx} className="my-2 border-bottom pb-3">
                    {viewPresc.type === "ORDINANCE" ? (
                      <>
                        <Ordonnance />
                        <div className="d-inline ms-3">
                          <span className="fw-bold"> {data.drugLabel}</span>
                        </div>{" "}
                        <br />
                        <div className="d-inline ms-5">
                          Durée:{" "}
                          <span className="fw-bold">
                            {" "}
                            {data.during + " " + data.dayOrWeekOrMonthLabel}
                          </span>
                        </div>{" "}
                        <br />
                        <div className="d-inline ms-5">
                          Dosage:{" "}
                          <span className="fw-bold"> {data.dosageLabel}</span>
                        </div>
                        <br />
                        <div className="d-inline ms-5">
                          Mode d'administration:{" "}
                          <span className="fw-bold">
                            {" "}
                            {data.administrationModeLabel}
                          </span>
                        </div>{" "}
                        <br />
                        {data.periodPrescriptions.map((item, idx) => {
                          return (
                            <>
                              {" "}
                              <div className="d-inline ms-5">
                                Periode:{" "}
                                <span className="fw-bold">
                                  {" "}
                                  {item.quantity} {item.periodLabel}
                                </span>
                              </div>{" "}
                              <br />
                            </>
                          );
                        })}
                        <div className="d-inline ms-5">
                          Précisions:{" "}
                          <span className="fw-bold"> {data.precision}</span>
                        </div>
                      </>
                    ) : (
                      <>
                        {viewPresc.type === "BIOLOGICAL_ANALYSIS" && (
                          <AnaBiolo />
                        )}
                        {viewPresc.type === "MEDICAL_IMAGERY" && <Imagery />}
                        {viewPresc.type === "CONSULTATION" && <Doctor />}
                        <div className="d-inline ms-3 fw-bold">
                          {data.label}
                        </div>{" "}
                        <br />
                        {viewPresc.type === "MEDICAL_IMAGERY" && (
                          <>
                            <div className="d-inline ms-5">
                              Région topographique:{" "}
                              <span className="fw-bold">
                                {" "}
                                {data.topographicRegion?.label}
                              </span>
                            </div>{" "}
                            <br />
                          </>
                        )}
                        <div className="d-inline ms-5">
                          Detail:{" "}
                          <span className="fw-bold"> {data.detail}</span>
                        </div>{" "}
                        <br />
                      </>
                    )}
                  </div>
                );
              })}
            </div>
          </div>
        </div>
      </div>

      <div className="modal fade" id="prescriptionModal">
        <div className="modal-dialog modal-dialog-centered modal-lg">
          <div className="modal-content">
            <div className="modal-header border-0">
              <span>Création d’une prescription</span>
              <button
                type="button"
                className="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div className="modal-body">
              <h2>
                {modalView === ""
                  ? "Veuillez choisir un type de prescription à créer"
                  : "Choisir parmi une..."}
              </h2>
              <div className="row row-cols-1 row-cols-md-4 my-5">
                <div className="col" data-bs-dismiss="modal">
                  <Link
                    to="ordonnance-medicale"
                    className="d-flex justify-content-center align-items-center border border-1 border-radius btn-height text-black text-decoration-none"
                  >
                    <div className="text-center">
                      <Ordonnance /> <br />
                      <span className="text-bold">Ordonnance</span> <br />
                      <span className="text-bold">médicale</span> <br />
                      <span className="text-bold">pharmaceutique</span> <br />
                    </div>
                  </Link>
                </div>
                <div className="col" data-bs-dismiss="modal">
                  <Link
                    to="form-analyse-biologique"
                    className="d-flex justify-content-center align-items-center border border-1 border-radius btn-height text-black text-decoration-none"
                  >
                    <div className="text-center">
                      <AnaBiolo /> <br />
                      <span className="text-bold">Analyses</span> <br />
                      <span className="text-bold">biologiques</span> <br />
                    </div>
                  </Link>
                </div>
                <div className="col" data-bs-dismiss="modal">
                  <Link
                    to="form-imagerie"
                    className="d-flex justify-content-center align-items-center border border-1 border-radius btn-height text-black text-decoration-none"
                  >
                    <div className="text-center">
                      <Imagery /> <br />
                      <span className="text-bold">Imagerie </span> <br />
                      <span className="text-bold">Médicale</span> <br />
                    </div>
                  </Link>
                </div>
                <div className="col" data-bs-dismiss="modal">
                  <Link
                    to="form-examen-specialise"
                    className="d-flex justify-content-center align-items-center border border-1 border-radius btn-height text-black text-decoration-none"
                  >
                    <div className="text-center">
                      <Doctor /> <br />
                      <span className="text-bold">Consultation /</span> <br />
                      <span className="text-bold">Examen</span> <br />
                      <span className="text-bold">spécialisé</span> <br />
                    </div>
                  </Link>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div className="modal fade" id="detailModal">
        <div className="modal-dialog modal-dialog-centered modal-lg">
          <div className="modal-content">
            <div className="modal-header border-0">
              <button
                type="button"
                className="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div className="modal-body">
              <div className="row row-cols-1 row-cols-md-4 my-5">
                <div className="col">
                  <div
                    to="antecedent-personne"
                    className="d-flex justify-content-center align-items-center border border-1 border-radius btn-height text-black text-decoration-none"
                  >
                    <div className="text-center">
                      <Ordonnance /> <br />
                      <span className="text-bold">Ordonnance</span> <br />
                      <span className="text-bold">médicale</span> <br />
                      <span className="text-bold">pharmaceutique</span> <br />
                    </div>
                  </div>
                </div>
                <div className="col">
                  <div
                    to="imageries"
                    className="d-flex justify-content-center align-items-center border border-1 border-radius btn-height text-black text-decoration-none"
                  >
                    <div className="text-center">
                      <AnaBiolo /> <br />
                      <span className="text-bold">Analyses</span> <br />
                      <span className="text-bold">biologiques</span> <br />
                    </div>
                  </div>
                </div>
                <div className="col">
                  <div
                    to="imageries"
                    className="d-flex justify-content-center align-items-center border border-1 border-radius btn-height text-black text-decoration-none"
                  >
                    <div className="text-center">
                      <Imagery /> <br />
                      <span className="text-bold">Imagerie </span> <br />
                      <span className="text-bold">Médicale</span> <br />
                    </div>
                  </div>
                </div>
                <div className="col">
                  <div
                    to="examens-specialises"
                    className="d-flex justify-content-center align-items-center border border-1 border-radius btn-height text-black text-decoration-none"
                  >
                    <div className="text-center">
                      <Doctor /> <br />
                      <span className="text-bold">Consultation /</span> <br />
                      <span className="text-bold">Examen</span> <br />
                      <span className="text-bold">spécialisé</span> <br />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <DeleteModal
        title={"Suppression de la prescription"}
        modal={"deletePresc"}
        id={deleteId}
        onDelete={deletePresc}
      />

      <div className="modal fade" id="notifyRef">
        <div className="modal-dialog modal-dialog-centered modal-md">
          <div className="modal-content">
            <div className="modal-header border-0">
              <h4 className="modal-title text-meduim text-bold"></h4>
              <button
                type="button"
                className="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>

            <div className="modal-body">{modalNotifyMsg}</div>

            <div className="modal-footer border-0 d-flex justify-content-start">
              <button
                type="button"
                className="btn btn-primary"
                data-bs-dismiss="modal"
                onClick={(e) => {
                  e.preventDefault();
                  setModalNotifyMsg("");
                }}
              >
                Ok
              </button>
            </div>
          </div>
        </div>
      </div>
      <input
        type="hidden"
        ref={notifyRef}
        data-bs-toggle="modal"
        data-bs-target="#notifyRef"
        onClick={(e) => {
          e.preventDefault();
          setNotifyBg("");
        }}
      />
    </>
  );
};

export default PrescriptionListe;
